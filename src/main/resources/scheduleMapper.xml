<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 스케줄 SQL -->
<mapper namespace="com.noback.group.dao.ScheduleMapper">

	<!-- 스케줄 전체 출력 -->
	<select id="listSchedule" resultType="schedule">
		select 
			schedule_num,	  
			schedule_title,  
			to_char(schedule_start, 'yyyy-mm-dd dy') as schedule_start,	 
			to_char(schedule_end, 'yyyy-mm-dd dy') as schedule_end,	  
			schedule_memo,	   
			schedule_writer,	   
			schedule_level
		from 
			noback_schedule 	
		order by 
			schedule_start
	</select>
	
	<!-- 스케줄 개별 출력 -->
	<select id="selectScheduleInfo" resultType="schedule" parameterType="int">
		select 
			schedule_num,	  
			schedule_title,  
			to_char(schedule_start, 'yyyy-mm-dd dy') as schedule_start,	 
			to_char(schedule_end, 'yyyy-mm-dd dy') as schedule_end,	  
			schedule_memo,	   
			schedule_writer,	   
			schedule_level 
		from 
			noback_schedule 
		where 
			schedule_num = #{schedule_num} 		
	</select>
	
	<!-- 스케줄 이번달 현황만 출력 -->
	<select id="selectScheduleMonth" resultType="schedule">
		select 
			schedule_num,	  
			schedule_title,  
			to_char(schedule_start, 'yyyy-mm-dd dy') as schedule_start,	 
			to_char(schedule_end, 'yyyy-mm-dd dy') as schedule_end,	  
			schedule_memo,	   
			schedule_writer,	   
			schedule_level 
		from 
			noback_schedule 
		where 
			to_char(schedule_start, 'mm') = to_char(sysdate, 'mm')
		order by 
			schedule_start
	</select>
	
	<!-- 일정 추가 -->
	<insert id="insertSchedule" parameterType="schedule">
		insert into
			noback_schedule
			(
			schedule_num,	  
			schedule_title,	  
			schedule_start,	 
			schedule_end,	  
			schedule_memo,	   
			schedule_writer,	   
			schedule_level	
			)			
		values
			(
			sked_seq.nextVal,
			#{schedule_title},
			#{schedule_start},
			#{schedule_end},
			#{schedule_memo},
			#{schedule_writer},
			#{schedule_level}
			)
	</insert>
	
</mapper>
